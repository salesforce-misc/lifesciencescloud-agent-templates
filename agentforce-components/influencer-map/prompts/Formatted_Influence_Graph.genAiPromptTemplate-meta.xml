<?xml version="1.0" encoding="UTF-8"?>
<GenAiPromptTemplate xmlns="http://soap.sforce.com/2006/04/metadata">
    <activeVersionIdentifier>239au6Xr8+Dk+wyfFZjOjhdcLfS31Bl5Vrxk0NRucKs=_1</activeVersionIdentifier>
    <description>Provide final output of Influence</description>
    <developerName>Formatted_Influence_Graph</developerName>
    <masterLabel>Formatted Influence Graph</masterLabel>
    <templateVersions>
        <content>Objective: 
Process raw, multi-line affiliation data to produce a clean, sorted, and human-readable report for a single primary account.

Instructions: 
You will be provided with a raw text string containing multiple affiliation records. Follow these steps to format the output: Identify the Primary Account: From the input data, determine the name that appears most frequently across all &quot;Affiliations&quot; entries. This is the {!$Input:TargetAccountName}

Extract Data: 
For each individual affiliation record, parse and extract the following details: [Affiliated Party]: The other person or entity in the &quot;Affiliations&quot; entry (i.e., not the {!$Input:TargetAccountName}). [Affiliation Strength]: The value from &quot;Affiliation Strength Type&quot;. [Affiliation Type]: The value from &quot;Affiliation Type&quot;. [Influence Type]: The value from &quot;Influence Type&quot;. Sort Data: Sort the extracted affiliations in descending order based on [Affiliation Strength]. The required order of precedence is: High, Medium, Low. Format Output: Construct the final output using the exact format specified below. The {!$Input:TargetAccountName}&apos;s name must only appear once in the main title. Each affiliation should be a numbered item.

Required Output Format:
Affiliated Accounts for {!$Input:TargetAccountName}:
1. [Affiliated Party] 
   Affiliation Strength: [Affiliation Strength] 
   Affiliation Type: [Affiliation Type] 
   Influence Type: [Influence Type]
2. [Affiliated Party] 
   Affiliation Strength: [Affiliation Strength] 
   Affiliation Type: [Affiliation Type] 
   Influence Type: [Influence Type]

Example Input:
&quot;Affiliations: Aaron Morita - Santa Clarita Hospital | Influence Type: Bidirectional | Affiliation Strength Type: High | Affiliation Type: Hard &apos;&lt;br&gt;&apos; &apos;&lt;br&gt;&apos; Affiliations: Aaron Morita - Maria Ignacia | Influence Type: Unidirectional | Affiliation Strength Type: High | Affiliation Type: Soft &apos;&lt;br&gt;&apos; &apos;&lt;br&gt;&apos; Affiliations: Thomas Dorsch - Aaron Morita | Influence Type: Unidirectional | Affiliation Strength Type: High | Affiliation Type: Soft &apos;&lt;br&gt;&apos; &apos;&lt;br&gt;&apos; &quot;

Example Output:
Affiliated Accounts for Aaron Morita: 

1. Santa Clarita HospitalAffiliation Strength: High 
Affiliation Type: Hard 
Influence Type: Bidirectional 

2. Maria Ignacia 
Affiliation Strength: High 
Affiliation Type: Soft 
Influence Type: Unidirectional 

3. Thomas Dorsch 
Affiliation Strength: High 
Affiliation Type: Soft 
Influence Type: Unidirectional

Apply Instructions to the Following Data: {!$Input:FinalResult}
</content>
        <inputs>
            <apiName>FinalResult</apiName>
            <definition>primitive://String</definition>
            <masterLabel>FinalResult</masterLabel>
            <referenceName>Input:FinalResult</referenceName>
            <required>true</required>
        </inputs>
        <inputs>
            <apiName>TargetAccountName</apiName>
            <definition>primitive://String</definition>
            <masterLabel>TargetAccountName</masterLabel>
            <referenceName>Input:TargetAccountName</referenceName>
            <required>true</required>
        </inputs>
        <primaryModel>sfdc_ai__DefaultOpenAIGPT4OmniMini</primaryModel>
        <status>Published</status>
        <versionIdentifier>239au6Xr8+Dk+wyfFZjOjhdcLfS31Bl5Vrxk0NRucKs=_1</versionIdentifier>
    </templateVersions>
    <type>einstein_gpt__flex</type>
    <visibility>Global</visibility>
</GenAiPromptTemplate>
